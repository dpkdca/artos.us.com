{%- if section.settings.enable_bar -%}
  {%- unless section.settings.home_page_only and template != 'index' -%}
    <section id="section-{{ section.id }}" data-section-id="{{ section.id }}" data-section-type="announcement-bar">
      <div class="AnnouncementBar">
        <div class="AnnouncementBar__Wrapper">
          <p class="AnnouncementBar__Content Heading">
            {%- if section.settings.link -%}
              <a href="{{ section.settings.link }}">
              <svg width="14" height="13" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.9727 6.76667V4.66807C10.9827 3.0681 9.9068 2.0069 8.98233 1.58433C8.7175 1.46323 8.4445 1.3699 8.16706 1.3006V1.16667C8.16706 0.523367 7.6437 0 7.0004 0C6.3571 0 5.83373 0.523367 5.83373 1.16667V1.3209C5.58383 1.38833 5.33813 1.4763 5.09966 1.58643C4.07813 2.0573 3.04306 3.19223 3.03373 4.66667V6.76667C3.03373 8.2572 2.50733 9.5361 1.46923 10.5679C1.4074 10.6295 1.385 10.7203 1.41113 10.8036C1.43726 10.8869 1.50796 10.9485 1.59406 10.9634L3.80863 11.3458C4.22116 11.417 4.60103 11.4753 4.96246 11.5234C5.36963 12.3214 6.16926 12.8336 7.04286 12.8336C7.9167 12.8336 8.71656 12.3212 9.1235 11.5227C9.48353 11.4749 9.86153 11.4168 10.2717 11.3458L12.4861 10.9634C12.5722 10.9487 12.6426 10.8869 12.669 10.8036C12.6954 10.7205 12.673 10.6295 12.6109 10.5679C11.524 9.48733 10.9727 8.20843 10.9727 6.76667ZM6.3004 1.16667C6.3004 0.780733 6.61446 0.466667 7.0004 0.466667C7.38633 0.466667 7.7004 0.780733 7.7004 1.16667V1.20913C7.23536 1.1424 6.76356 1.1452 6.3004 1.2201V1.16667ZM7.0431 12.3667C6.4523 12.3667 5.90023 12.0731 5.5458 11.5932C6.0673 11.6468 6.55403 11.6739 7.04053 11.6739C7.5289 11.6739 8.01726 11.6468 8.54086 11.5925C8.1862 12.0729 7.6339 12.3667 7.0431 12.3667ZM10.1926 10.8857C9.74486 10.9629 9.33443 11.0257 8.94663 11.0752C8.94616 11.0752 8.9457 11.0752 8.945 11.0752C8.77396 11.0969 8.60783 11.1158 8.4452 11.1321C8.4438 11.1321 8.44263 11.1323 8.44123 11.1323C8.29213 11.1473 8.14653 11.1594 8.00233 11.1697C7.97526 11.1715 7.9482 11.1734 7.92136 11.175C7.79653 11.1832 7.6731 11.1897 7.55036 11.1944C7.5254 11.1953 7.5002 11.1967 7.47523 11.1974C7.18496 11.2072 6.89866 11.2072 6.60863 11.1977C6.58273 11.1967 6.5566 11.1953 6.5307 11.1944C6.41006 11.1895 6.2885 11.1834 6.16553 11.1753C6.13636 11.1734 6.1072 11.1715 6.0778 11.1694C5.93803 11.1594 5.79663 11.1477 5.6522 11.1333C5.64683 11.1328 5.6417 11.1323 5.63633 11.1319C5.47486 11.1158 5.31013 11.0969 5.14073 11.0754C5.14003 11.0754 5.13933 11.0754 5.13863 11.0754C4.74943 11.0262 4.33736 10.9629 3.88773 10.8855L2.1004 10.577C3.02976 9.5144 3.5004 8.2348 3.5004 6.76667V4.66807C3.50833 3.3999 4.4076 2.41943 5.29496 2.01017C5.55886 1.8886 5.83256 1.79783 6.11093 1.73413C6.11326 1.73367 6.11583 1.7339 6.11816 1.73343C6.69333 1.60417 7.30513 1.59833 7.88683 1.71757C7.88986 1.71827 7.8929 1.71687 7.89593 1.71733C8.2002 1.7808 8.4998 1.87693 8.78843 2.00877C9.6492 2.4024 10.5142 3.37633 10.506 4.6669V6.7669C10.506 8.1746 11.0135 9.4836 11.979 10.5775L10.1926 10.8857Z" fill="#F7F4F4"/>
                <path d="M8.4975 2.64549C7.59333 2.23226 6.48617 2.23179 5.58807 2.64596C5.0759 2.88209 4.2072 3.57299 4.2002 4.66522C4.1995 4.79402 4.3031 4.89902 4.43213 4.89996C4.4326 4.89996 4.43307 4.89996 4.43353 4.89996C4.56163 4.89996 4.66617 4.79659 4.66687 4.66802C4.67223 3.81006 5.3713 3.25986 5.78337 3.06969C6.56037 2.71106 7.52077 2.71199 8.30313 3.06969C8.4205 3.12336 8.55887 3.07179 8.61253 2.95466C8.6662 2.83729 8.6144 2.69892 8.4975 2.64549Z" fill="#F7F4F4"/>
                <path d="M1.12047 4.73505C1.02923 4.64382 0.881767 4.64382 0.790533 4.73505C0.2807 5.24488 0 5.92342 0 6.64605C0 7.36868 0.2807 8.04745 0.790533 8.55705C0.836033 8.60255 0.895767 8.62542 0.9555 8.62542C1.01523 8.62542 1.07497 8.60255 1.12047 8.55705C1.2117 8.46582 1.2117 8.31835 1.12047 8.22712C0.698833 7.80548 0.466667 7.24408 0.466667 6.64605C0.466667 6.04802 0.698833 5.48638 1.12047 5.06498C1.21147 4.97375 1.21147 4.82628 1.12047 4.73505Z" fill="#F7F4F4"/>
                <path d="M1.93742 8.09436C1.99715 8.09436 2.05688 8.07149 2.10238 8.02599C2.19362 7.93476 2.19362 7.78729 2.10238 7.69606C1.50552 7.09919 1.50552 6.12829 2.10238 5.53166C2.19362 5.44043 2.19362 5.29296 2.10238 5.20173C2.01115 5.11049 1.86368 5.11049 1.77245 5.20173C0.993818 5.98036 0.993818 7.24759 1.77245 8.02599C1.81795 8.07173 1.87768 8.09436 1.93742 8.09436Z" fill="#F7F4F4"/>
                <path d="M13.2099 4.73505C13.1186 4.64382 12.9712 4.64382 12.8799 4.73505C12.7887 4.82628 12.7887 4.97375 12.8799 5.06498C13.3016 5.48662 13.5337 6.04802 13.5337 6.64605C13.5337 7.24408 13.3016 7.80548 12.8799 8.22712C12.7887 8.31835 12.7887 8.46582 12.8799 8.55705C12.9254 8.60255 12.9852 8.62542 13.0449 8.62542C13.1046 8.62542 13.1644 8.60255 13.2099 8.55705C13.7197 8.04745 14.0004 7.36868 14.0004 6.64605C14.0004 5.92342 13.7197 5.24488 13.2099 4.73505Z" fill="#F7F4F4"/>
                <path d="M11.8975 5.20173C11.8063 5.29296 11.8063 5.44043 11.8975 5.53166C12.4944 6.12853 12.4944 7.09943 11.8975 7.69606C11.8063 7.78729 11.8063 7.93476 11.8975 8.02599C11.943 8.07149 12.0028 8.09436 12.0625 8.09436C12.1222 8.09436 12.182 8.07149 12.2275 8.02599C13.0061 7.24736 13.0061 5.98013 12.2275 5.20173C12.1362 5.11049 11.9885 5.11049 11.8975 5.20173Z" fill="#F7F4F4"/>
              </svg>
              {{ section.settings.content | escape }}</a>
            {%- else -%}
              {{ section.settings.content | escape }}
            {%- endif -%}
          </p>
        </div>
      </div>
    </section>

    <style>
      #section-{{ section.id }} {
        background: {{ section.settings.background }};
      }
      .AnnouncementBar__Content a{
        color: {{ section.settings.text_color }};
      }
    </style>

    <script>
      document.documentElement.style.setProperty('--announcement-bar-height', document.getElementById('shopify-section-announcement').offsetHeight + 'px');
    </script>
  {%- endunless -%}
{%- endif -%}

{% schema %}
{
  "name": "Announcement bar",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_bar",
      "label": "Enable bar",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "home_page_only",
      "label": "Home page only",
      "default": false
    },
    {
      "type": "color",
      "id": "background",
      "label": "Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text",
      "default": "#ffffff"
    },
    {
      "type": "text",
      "id": "content",
      "label": "Text",
      "default": "Announce something here"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Link"
    }
  ]
}
{% endschema %}